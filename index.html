<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯æ—¥ä»»å‹™ç³»çµ± - æ‡²ç½°æ¨¡å¼</title>
    <style>
        :root { --primary: #4a90e2; --success: #27ae60; --danger: #e74c3c; --warning: #f39c12; --bg: #f5f7fa; }
        body { font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; background-color: var(--bg); color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
        .card { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; }
        h2 { border-left: 5px solid var(--primary); padding-left: 10px; font-size: 1.2em; }
        
        .status-bar { display: flex; justify-content: space-around; text-align: center; margin-bottom: 10px; }
        .status-item { flex: 1; }
        .status-value { font-size: 20px; font-weight: bold; display: block; }
        
        .task-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #eee; }
        .punish-active { border: 2px solid var(--danger); background-color: #fff5f5; border-radius: 10px; padding: 15px; margin: 10px 0; }

        .btn { border: none; border-radius: 8px; padding: 8px 12px; cursor: pointer; transition: 0.2s; color: white; }
        .btn-main { background: var(--primary); width: 100%; font-size: 16px; padding: 12px; margin: 10px 0; }
        .btn-success { background: var(--success); }
        .btn-danger { background: var(--danger); }
        .btn-small { font-size: 12px; padding: 4px 8px; }
        .btn:disabled { background: #ccc; cursor: not-allowed; }

        .input-group { display: flex; flex-direction: column; gap: 8px; margin-bottom: 15px; }
        input { padding: 8px; border: 1px solid #ddd; border-radius: 5px; }
        
        .fail-dots { color: var(--danger); font-size: 1.5em; letter-spacing: 5px; }
    </style>
</head>
<body>

    <div class="card">
        <h1>ğŸš€ ä»»å‹™æ§åˆ¶ä¸­å¿ƒ</h1>
        <div class="status-bar">
            <div class="status-item">ç´¯è¨ˆç©åˆ†<span id="scoreDisplay" class="status-value" style="color:var(--success)">0</span></div>
            <div class="status-item">å¤±æ•—æ¬¡æ•¸<span id="failDisplay" class="status-value" style="color:var(--danger)">0 / 3</span></div>
        </div>
        <div id="failDots" class="fail-dots" style="text-align: center;"></div>
        <button class="btn btn-main" onclick="drawThreeTasks()">ğŸ² æŠ½å–ä»Šæ—¥ä»»å‹™</button>
    </div>

    <div id="punishArea" style="display: none;">
        <div class="card punish-active">
            <h2 style="color:var(--danger); border-color:var(--danger)">âš ï¸ æ‡²ç½°ä»»å‹™æ¿€æ´»ï¼</h2>
            <div id="punishContent" style="font-size: 1.1em; margin: 10px 0;"></div>
            <button class="btn btn-danger" style="width:100%" onclick="finishPunishment()">æˆ‘å·²å®Œæˆæ‡²ç½°ï¼Œé‡æ–°é–‹å§‹</button>
        </div>
    </div>

    <div class="card">
        <h2>ğŸ¯ ä»Šæ—¥ä»»å‹™</h2>
        <div id="todayDisplay">å°šæœªæŠ½å–...</div>
    </div>

    <div class="card">
        <h2>ğŸ› ï¸ ä»»å‹™åº«è¨­å®š</h2>
        <div class="input-group">
            <input type="text" id="newTaskCmd" placeholder="ä»»å‹™åç¨±...">
            <button class="btn btn-success" onclick="addNewTask('normal')">ï¼‹ æ–°å¢ä¸€èˆ¬ä»»å‹™</button>
        </div>
        <div id="poolDisplay"></div>
        
        <hr>
        
        <h2 style="border-color: var(--danger)">ğŸ’€ æ‡²ç½°åº«è¨­å®š</h2>
        <div class="input-group">
            <input type="text" id="newPunishCmd" placeholder="æ‡²ç½°å…§å®¹ (å¦‚ï¼šæ·±è¹²50ä¸‹)...">
            <button class="btn btn-danger" onclick="addNewTask('punish')">ï¼‹ æ–°å¢æ‡²ç½°ä»»å‹™</button>
        </div>
        <div id="punishPoolDisplay"></div>
    </div>

    <script>
        // è³‡æ–™è¼‰å…¥
        let taskPool = JSON.parse(localStorage.getItem('pool
